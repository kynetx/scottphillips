{
   "dispatch": [
      {"domain": "www.google.com"},
      {"domain": "search.yahoo.com"},
      {"domain": "www.bing.com"},
      {"domain": "search.microsoft.com"},
      {"domain": "hertz.com"}
   ],
   "global": [
      {
         "cachable": {
            "period": "seconds",
            "value": "2"
         },
         "datatype": "JSON",
         "name": "ebates",
         "source": "http://service.azigo.com/updates/kynetx/datasets/ebates-test.json",
         "type": "dataset"
      },
      {
         "content": null,
         "type": "css"
      },
      {"emit": "\n\n \t        var globalData = {\n                                \"Source\" : \"aaaw\",\n\t\t\t\t\"RemindMeIconUrl\" : \"http://www.azigo.com/images/rm/crd/aaa_18x24.png\",\n                                \"FlyoutIconUrl\" : \"http://www.azigo.com/images/rm/crd/aaa_60x90.png\"\n\t\t\t };\n\n\tfunction remindMeSelector(obj) { \n                var annotationContent;\n\t\tvar remindMeDomain = obj.name.replace(/http:\\/\\/([A-Za-z0-9.-]+)\\/.*/,\"$1\");\n        \tremindMeDomain = remindMeDomain.replace(\"http://\",\"\");\n\t\tremindMeDomain = remindMeDomain.replace(\"www.\",\"\");\n\t\tremindMeDomain = remindMeDomain.replace(\"www1.\",\"\");\n\t\tremindMeDomain = remindMeDomain.replace(/\\./, \"\");\n\t\tremindMeDomain = remindMeDomain.replace(/\\.[^.]+$/,\"\");\n                remindMeDomain = remindMeDomain.replace(/[&]/g,\"and\");\n                remindMeDomain = remindMeDomain.replace(/\\s+/g,\"\");\n\t\tremindMeDomain = remindMeDomain.replace(/[']/g,\"\");\n\t\tremindMeDomain = remindMeDomain.replace(/[-]/g,\"\");\n                remindMeDomain = remindMeDomain.toLowerCase();\n\n                var remindMeDivId = \"remindMe_\"+remindMeDomain;\n                var remindMeFlyoutDivId = \"remindMeFlyout_\"+remindMeDomain;\n\t\tvar remindMeWrapper = \"remindMeWrapper_\"+remindMeDomain;\n\n\t\tif($K(\"#\"+remindMeDivId).length == 0) {\n\t\t   var remindMeMainDiv = createRemindMeDiv(remindMeDivId);\n                   var remindMeFlyoutDiv = createRemindMeFlyoutDiv(remindMeFlyoutDivId);\n\n\t\t   remindMeFlyoutDiv.append(\n\t\t\tgetFlyoutDetails(\n                                                 obj.name,\n                                                 obj.link, \n                                                 globalData.FlyoutIconUrl, \n                                                 obj.text, \n                                                 obj.icon\n                                          )\n\t\t   );\n\n \t           var remindMeDiv = $K(\"<div><\/div>\");\n\n                   var wrapperDiv = $K(\"<div id='\"+remindMeWrapper+\"' class='remindme-reminders-wrapper'><\/div>\");\n\t\t   wrapperDiv.append(remindMeMainDiv);\n\n\t\t   remindMeDiv.append(wrapperDiv);\n\n\t           remindMeDiv.append(remindMeFlyoutDiv);\n\n                   annotationContent = remindMeDiv;\n                   registerEvents(remindMeDivId, remindMeFlyoutDivId, false);\n                }\n                else { \n                   if($K(\"#\"+remindMeDivId).find(\"#img_\"+globalData.Source+\"_remindMe\").length) {\n                        return false;\n                   }\n\n\t\t   if($K(\"#\"+remindMeDivId).children(\".txt-reminder\").length) {\n                      $K(\"#\"+remindMeDivId).children(\".txt-reminder\").after(\n                                              makeListItem(\n\t\t                                    null, \n\t\t                                    null, \n\t\t                                    $K(\"<img id='img_\"+globalData.Source+\"_remindMe' src='\"+globalData.RemindMeIconUrl+\"' />\")\n\t\t                              )\n                      );\n                   }\n\n\t\t   if($K(\"#\"+remindMeFlyoutDivId).length) {\n\t\t\t$K(\"#\"+remindMeFlyoutDivId).append(\n\t\t\t                   getFlyoutDetails(\n                                                                obj.name,\n                                                                obj.link, \n                                                                globalData.FlyoutIconUrl, \n                                                                obj.text, \n                                                                obj.icon\n                                           )\n\t\t        );\n  \t\t   }\n\n\t\t   //Increment the counter.\n\t\t   var spanReminders = $K(\"#\"+remindMeDivId).children(\".txt-reminder\").children(\".spanRemindMeNReminders\");\n                   if (spanReminders.length > 0)\n                   {\n                       var totalReminders = parseInt(spanReminders.text());\n                       if (!isNaN(totalReminders))\n                       {\n\t                    totalReminders = totalReminders + 1;\n                            spanReminders.text(String(totalReminders));\n\t                    if(totalReminders == 1) {\n\t\t               $K(\"#\"+remindMeDivId).children(\".txt-reminder\").children(\".spanRemindMeTextReminders\").text(\"Reminder\");\n\t                    }\n\t                    else {\n\t\t               $K(\"#\"+remindMeDivId).children(\".txt-reminder\").children(\".spanRemindMeTextReminders\").text(\"Reminders\");\n\t                    }\n                       }                \n\t\t   }\n                   annotationContent = false;\n                }\n\t     return annotationContent;\n        }\n\n        function registerEvents(remindMeDivId, remindMeFlyoutDivId, isSpotlightEvent) {\t\t\n\t     $K(\"#\"+remindMeDivId).live('mouseover', function () {\n\t\t   $K('#'+remindMeDivId).css({'cursor':'hand','cursor':'pointer'});\n                   $K('#'+remindMeFlyoutDivId).show();\n\t     });\n\n\t     $K(\"#\"+remindMeDivId).live('mouseout', function () {\n                   \n                   if(isSpotlightEvent) {\n                      $K(\"#spotlight-reminders-wrapper\").live('mouseover', function() {\n                           $K('#'+remindMeFlyoutDivId).show();                           \n                      });\n                      $K(\"#spotlight-reminders-wrapper\").live('mouseout', function() {\n                           $K('#'+remindMeFlyoutDivId).hide();   \n\t\t\t   $K(\"#spotlight-reminders-wrapper\").die('mouseover');\n\t\t\t   $K(\"#spotlight-reminders-wrapper\").die('mouseout');\n                      });\n                   }\n\t\t   else {\n\t\t\t$K(\"#\"+remindMeDivId).parent().mouseover(function() {\n                           $K('#'+remindMeFlyoutDivId).show();    \n\t\t\t});\n                      $K(\"#\"+remindMeDivId).parent().mouseout(function() {\n                           $K('#'+remindMeFlyoutDivId).hide();   \n\t\t\t   $K(\"#\"+remindMeDivId).parent().unbind('mouseover');\n\t\t\t   $K(\"#\"+remindMeDivId).parent().unbind('mouseout');\n                      });\n\t\t   }\n\n\t\t   $K('#'+remindMeFlyoutDivId).hide();\n\t     });\n\n\t     $K(\"#\"+remindMeFlyoutDivId).live('mouseover', function () {\n        \t   $K('#'+remindMeFlyoutDivId).show();\n\t     });\n\n\t     $K(\"#\"+remindMeFlyoutDivId).live('mouseout', function () {\n\t\t   $K('#'+remindMeFlyoutDivId).hide();\n\t\t   if(isSpotlightEvent) {\n\t\t\t   $K(\"#spotlight-reminders-wrapper\").die('mouseover');\n\t\t\t   $K(\"#spotlight-reminders-wrapper\").die('mouseout');\n\t\t   }\n\t\t   else {\n\t\t\t   $K(\"#\"+remindMeDivId).parent().unbind('mouseover');\n\t\t\t   $K(\"#\"+remindMeDivId).parent().unbind('mouseout');\n\t\t   }\n             });\n        }\n\n\tfunction createRemindMeDiv(remindMeDivId) {\n             var remindMeMainUl = $K(\"<ul><\/ul>\");\n             remindMeMainUl.attr({\"id\":remindMeDivId, \"class\":\"spotlightReminders\"});\n\n             remindMeMainUl.append(\n                  makeListItem(null, \"azigo-logo\", $K(\"<img src='http://www.azigo.com/images/rm/azigo_16x16.png' />\"))\n             );\n\n             remindMeMainUl.append(\n                  makeListItem(\n\t\t     \"remindme-txt-reminder\", \n\t\t     \"txt-reminder\", \n\t\t     \"<span class='spanRemindMeNReminders'>1<\/span> <span class='spanRemindMeTextReminders'>Reminder<\/span>\"\n\t\t  )\n             );\n\n             remindMeMainUl.append(\n                  makeListItem(\n\t\t     null, \n\t\t     null, \n\t\t     $K(\"<img id='img_\"+globalData.Source+\"_remindMe' src='\"+globalData.RemindMeIconUrl+\"' />\")\n\t\t  )\n             );\n\n             remindMeMainUl.append(\n                  makeListItem(null, null, $K(\"<img src='http://www.azigo.com/images/rm/FlyoutIndicator.png' />\"))\n             );\n\n             return remindMeMainUl;\n        }\n\n\tfunction createRemindMeFlyoutDiv(remindMeFlyoutDivId)\n        {\n\t    var remindMeFlyoutDiv = $K(\"<div><\/div>\");\n\t    remindMeFlyoutDiv.attr({\"id\":remindMeFlyoutDivId, \"class\":\"remindme-flyout-wrapper\"});\n\t    remindMeFlyoutDiv.append($K(\"<div><\/div>\").attr(\"class\", \"flyout-pointer\"));\n            return remindMeFlyoutDiv;\n        }\n\n\tfunction makeListItem(listItemId, listItemClass, listItemContent) {\n             var listItem = $K(\"<li><\/li>\");\n             if(listItemClass != null) {\n                 listItem.attr(\"class\", listItemClass);\n             }\n\t     if(listItemId != null) {\n\t         listItem.attr(\"id\", listItemId);\n\t     }\n             listItem.append(listItemContent);\n             return listItem;        \n        }\n\n\tfunction makeAnchorTag(aUrl, aClass, aText)\n        {\n             var anchorTag = $K(\"<a><\/a>\");\n             anchorTag.attr(\"href\", aUrl);\n             if(aClass != null) {\n                 anchorTag.attr(\"class\", aClass);\n             }\n             anchorTag.append(aText);\n             return anchorTag;\n        }\n\n    /*\n\tFunction that takes the details to be displayed in the flyout and creates a flyout component with those details.\n    */\n    function getFlyoutDetails(clientName, clientUrl, clientLogo, displayText, buttonType)\n    { \t         \n\tvar flyoutDetailsDiv = $K(\"<div><\/div>\");\n\tflyoutDetailsDiv.attr(\"class\",\"flyout-reminder-details clearfix\");\n\n        var flyoutDetailsUl = $K(\"<ul><\/ul>\");\n\n        flyoutDetailsUl.append(\n\t\tmakeListItem(null, null, $K(\"<img src='\"+clientLogo+\"' />\"))\n\t);\n        flyoutDetailsUl.append(\n                makeListItem(null, \"flyout-reminder-url\", makeAnchorTag(clientUrl, null, clientName))\n        );\n        flyoutDetailsUl.append(\n\t\tmakeListItem(null, \"flyout-reminder-text\", displayText)\n\t);\n\tvar discountButton = \"\";\n\t//if(buttonType === \"discount\") {\n\t\tdiscountButton = makeAnchorTag(clientUrl, \"flyout-reminder-button\", \"Click and Save\");\n\t//}\n        flyoutDetailsUl.append(\n\t\tmakeListItem(null, null, discountButton)\n\t);        \n\n        flyoutDetailsDiv.append(flyoutDetailsUl);\n            \n\treturn flyoutDetailsDiv;\n    }\n\n/*\n    Main function for the Spotlight that will be called from each rule.\n*/\nKOBJ.spotlight = function (source) {\n    /*\n\tCallback function to handle JSON data returned from the nutchfilter url.\n    */\n    function datasetcallback(d){\n        if(d) {\n           var response = d.response;\n           if(response) {\n               if(response.docs.length > 0) {\n               \t    displaySpotlight(response);\n               }\n           }\n        }      \t\n    }\n\n    /* \n\tTake out the search string from the url and construct a remoteUrl for the current source. \n    */\n    \n    var q = String(window.location).replace(/^.*[\\?&][qp]=([^&]+).*$/, \"$1\");\n    var remoteUrl = \"http://service.azigo.com/solr/nutchfilter.jsp?q=\"+q+\"&fq=source:\"+source+\"&callback=?\";\n\n    $K.getJSON(remoteUrl,datasetcallback);\n\n    /*\n\tFunction to create the main div for Spotlight. It just creates the spotlight template that will be displayed \n\tabove the search results.\n    */\n    function createSpotlightMainDiv()\n    {\n\t var spotlightMainDiv = $K(\"<div><\/div>\");\n\t spotlightMainDiv.attr(\"id\", \"spotlight-reminders-wrapper\");\n\n         var spotlightMainUl = $K(\"<ul><\/ul>\");\n         spotlightMainUl.attr({\"id\":\"spotlightReminders\", \"class\":\"spotlightReminders\"});\n\n         spotlightMainUl.append(\n                    makeListItem(null, 'azigo-logo', $K(\"<img src='http://www.azigo.com/images/rm/azigo_16x16.png' />\"))\n         );\n\n         var spotlightReminderNSpan = $K(\"<span><\/span>\");\n         spotlightReminderNSpan.attr(\"id\", \"spanNReminders\");\n         spotlightReminderNSpan.text(\"0\");\n\n         var spotlightReminderTextSpan = $K(\"<span><\/span>\");\n         spotlightReminderTextSpan.attr(\"id\", \"spanTextReminders\");\n         spotlightReminderTextSpan.text(\"Reminders\");\n\n         spotlightMainUl.append(\n                           makeListItem(\n\t\t\t\t\"spotlight-txt-reminder\", \n\t\t\t\t\"txt-reminder\", \n\t\t\t\t\"<span id='spanNReminders'>0<\/span> <span id='spanTextReminders'>Reminders<\/span>\"\n\t\t\t   )\n         );\n\n         spotlightMainUl.append(\n                    makeListItem(null, null, $K(\"<img src='http://www.azigo.com/images/rm/FlyoutIndicator.png' />\"))\n         );\n\n         var spotlightMainP = $K(\"<p><\/p>\");\n         spotlightMainP.attr(\"class\", \"descriptive-text\");\n         spotlightMainP.text(\"My Sponsored Links\");\n\n         spotlightMainDiv.append(spotlightMainUl);\n         spotlightMainDiv.append(spotlightMainP);\n\n         return spotlightMainDiv;\n    }\n\n    /*\n\tFunction to create the Flyout Div for Spotlight. It just creates the flyout template that will be displayed\n\tonce user hovers over the Spotlight components.\n    */\n    function createSpotlightFlyoutDiv()\n    {\n\tvar spotlightFlyoutDiv = $K(\"<div><\/div>\");\n\tspotlightFlyoutDiv.attr({\"id\":\"spotlightFlyoutDiv\", \"class\":\"flyout-wrapper\"});\n\tspotlightFlyoutDiv.append($K(\"<div><\/div>\").attr(\"class\", \"flyout-pointer\"));\n        return spotlightFlyoutDiv;\n    }\n\n    /*\n\tCallback function to handle JSON data returned from fetch url - which gives details requierd for the flyout.\n    */\n    function flyoutContentCallback(data)\n    {\n        if($K('#spotlightFlyoutDiv').length) {\n           $K.each(data, function(){\n                        $K('#spotlightFlyoutDiv').append(\n\t\t\t                  getFlyoutDetails(\n                                                 this.name,\n                                                 this.link, \n                                                 globalData.FlyoutIconUrl, \n                                                 this.text, \n                                                 this.icon\n                                          )\n                        );\n                    }\n           );\n        }\n    }    \n\n    /*\n\tMain function that creates all the components required for Spotlight and injects them in the search page.\n    */\n    function displaySpotlight(response)\n    {\n        var logoUrl = globalData.RemindMeIconUrl;\n\n        if($K(\"#spotlight-reminders-wrapper\").length == 0) {\n\t    var spotlightMainDiv = createSpotlightMainDiv();\n            var spotlightFlyoutDiv = createSpotlightFlyoutDiv();\n \t    var spotlightDiv = $K(\"<div id='spotlight-main-flyout'><\/div>\");\n\t    spotlightDiv.append(spotlightMainDiv);\n\t    spotlightDiv.append(spotlightFlyoutDiv);\n            if($K(\"#res\").length) {\n                $K(\"#res\").prepend(spotlightDiv);\n            }\n            else if($K(\"#web\").length) {\n                $K(\"#web\").prepend(spotlightDiv);\n            }\n            else if($K(\"#results\").length) {\n                $K(\"#results\").prepend(spotlightDiv);\n            }\n        }\n\n        //Register the mousover and mouseout events to show/hide the flyout.\n\tregisterEvents(\"spotlightReminders\", \"spotlightFlyoutDiv\", true);\n\n\t/*\n\t    If the details for this source has already been injected in the page, we don't need to go further.\n\t*/\n    \tif($K(\"#img_\"+source+\"_spotlight\").length) {\n            return;\n        }\n\n        if($K(\"#spotlight-txt-reminder\").length) {\n             $K(\"#spotlight-txt-reminder\").after(\"<li><img id='img_\"+source+\"_spotlight' src='\"+logoUrl+\"' /><\/li>\");\n        }\n        var spanReminders = $K(\"#spanNReminders\");\n        if (spanReminders.length > 0)\n        {\n            var totalReminders = parseInt(spanReminders.text());\n           if (!isNaN(totalReminders))\n           {\n\t       if(response.docs.length > 3) {\n\t\t   totalReminders = totalReminders + 3;\n\t       }\n\t       else {\n               \t   totalReminders = totalReminders + response.docs.length;\n\t       }\n               spanReminders.text(String(totalReminders));\n\t       if(totalReminders == 1) {\n\t\t   $K(\"#spanTextReminders\").text(\"Reminder\");\n\t       }\n\t       else {\n\t\t   $K(\"#spanTextReminders\").text(\"Reminders\");\n\t       }\n           }\n        }\n\n        /*\n            Make a call to the URL which will get us the detailed content as below.\n        */\n\tvar jsonData = \"\";\n\tvar index = 1;\n\t$K.each(response.docs, function(){\n\t\t\t\tif(index > 1)\n\t\t\t\t    jsonData += \",\";\n\t\t\t\tjsonData += \"'KOBJL\"+index+\"':{'url':'\"+this.url+\"'}\";\n\t\t\t\tindex++;\n\t\t\t\tif(index > 3)\n\t\t\t\t   return false;\n\t\t\t});\n\n        var jsonUrl = \"https://service.azigo.com/remindmeac/fetch?callback=?&jsonData=true&source=\"+source;\n        $K.getJSON(jsonUrl, \"annotatedata={\"+jsonData+\"}\", flyoutContentCallback);\n  }\n};\n            "},
      {"emit": "\nvar url_prefix = \"http://frag.kobj.net/clients/1024/images/\";\n\nvar link_text = {\n\t\"ebates\": \"<img style='padding-top: 7px;height:28px' src='\" + url_prefix + \"ebates_logo_34.png' border='0'>\"\n};\n\n\nfunction make_selector(key){\n\tvar func = function(obj){\n\t  function mk_anchor (o, key) {\n\t    return $K('<a href=' + o.link + '/>').attr(\n\t      {\"class\": 'KOBJ_'+key,\n\t       \"title\": o.text || \"Click here for discounts!\"\n\t      }).html(link_text[key]);\n\t  }\n\t  var entryURL = $K(obj).find(\"span.url, cite\").text();\n\t  var host = KOBJ.get_host(entryURL);\n\t  var o = KOBJ.pick(KOBJ['data'][key][host]);\n\t  //try prepending a www. if necessary\n\t  if(!o){\n\t  \to = KOBJ.pick(KOBJ['data'][key][\"www.\" + host]);\n\t  \t//if(o) console.log(\"www. added, found match\");\n\t  }\n\n          if(!o){\n                o = KOBJ.pick(KOBJ['data'][key][host.replace(/^www./, \"\")]);\n          }\n\n\t  if(o) {\n\t     return mk_anchor(o,key);\n\t  } else {\n\t    return false;\n\t  }\n\t};\n\treturn func;\n}\n\nebates_selector = make_selector('ebates');\n            "}
   ],
   "meta": {
      "description": "1024 Production",
      "keys": {"errorstack": "1d895cc0802263e1c523349091752b25"},
      "logging": "off",
      "name": "1024 Production"
   },
   "rules": [
      {
         "actions": [
            {"action": {
               "args": [{
                  "type": "var",
                  "val": "ebates_selector"
               }],
               "modifiers": [
                  {
                     "name": "name",
                     "value": {
                        "type": "str",
                        "val": "remindme"
                     }
                  },
                  {
                     "name": "head_image",
                     "value": {
                        "type": "str",
                        "val": "http://www.azigo.com/sales-demo/remindme_bar40_l.png"
                     }
                  },
                  {
                     "name": "tail_image",
                     "value": {
                        "args": [
                           {
                              "type": "var",
                              "val": "url_prefix"
                           },
                           {
                              "type": "str",
                              "val": "remindme_bar40_r.png"
                           }
                        ],
                        "op": "+",
                        "type": "prim"
                     }
                  },
                  {
                     "name": "height",
                     "value": {
                        "type": "str",
                        "val": "40px"
                     }
                  },
                  {
                     "name": "left_margin",
                     "value": {
                        "type": "str",
                        "val": "46px"
                     }
                  }
               ],
               "name": "annotate_search_results",
               "source": null
            }},
            {"emit": "  "}
         ],
         "blocktype": null,
         "callbacks": {"success": [{
            "attribute": "class",
            "trigger": null,
            "type": "click",
            "value": "KOBJ_ebates"
         }]},
         "cond": {
            "args": [
               {
                  "args": [{
                     "type": "str",
                     "val": "datasets"
                  }],
                  "predicate": "param",
                  "source": "page:"
               },
               {
                  "type": "str",
                  "val": "(^|,)ebates(,|$)"
               }
            ],
            "op": "like",
            "type": "prim"
         },
         "emit": null,
         "foreach": [],
         "name": "ebates",
         "pagetype": {
            "event_expr": {
               "lagacy": 1,
               "pattern": "^http://www.google.com|^http://search.yahoo.com|^http://www.bing.com",
               "type": "prim_event",
               "vars": []
            },
            "op": "pageview"
         },
         "pre": [{
            "lhs": "url_prefix",
            "rhs": {
               "type": "str",
               "val": "http://frag.kobj.net/clients/1024/images/"
            },
            "type": "expr"
         }],
         "state": "active"
      },
      {
         "actions": [
            {"action": {
               "args": [
                  {
                     "type": "str",
                     "val": "absolute"
                  },
                  {
                     "type": "str",
                     "val": "top: 50px"
                  },
                  {
                     "type": "str",
                     "val": "right: 50px"
                  },
                  {
                     "type": "var",
                     "val": "upgradeReminder"
                  }
               ],
               "modifiers": null,
               "name": "float_html",
               "source": null
            }},
            {"action": {
               "args": [
                  {
                     "type": "str",
                     "val": ".dismiss"
                  },
                  {
                     "type": "str",
                     "val": "click"
                  }
               ],
               "modifiers": null,
               "name": "watch",
               "source": null
            }}
         ],
         "blocktype": null,
         "callbacks": null,
         "cond": {
            "args": [
               {
                  "args": [
                     {
                        "args": [{
                           "type": "str",
                           "val": "datasets"
                        }],
                        "predicate": "param",
                        "source": "page:"
                     },
                     {
                        "type": "str",
                        "val": "(^|,)sadv(,|$)"
                     }
                  ],
                  "op": "like",
                  "type": "prim"
               },
               {
                  "domain": "ent",
                  "expr": {
                     "type": "num",
                     "val": null
                  },
                  "ineq": "==",
                  "timeframe": "hours",
                  "type": "persistent_ineq",
                  "var": "dismissed",
                  "within": {
                     "type": "num",
                     "val": null
                  }
               }
            ],
            "op": "&&",
            "type": "prim"
         },
         "emit": "  ",
         "foreach": [],
         "name": "sadv",
         "pagetype": {
            "event_expr": {
               "lagacy": 1,
               "pattern": "^http://www.google.com|^http://search.yahoo.com|^http://www.bing.com",
               "type": "prim_event",
               "vars": []
            },
            "op": "pageview"
         },
         "pre": [
            {
               "lhs": "dismissed",
               "rhs": {
                  "domain": "ent",
                  "name": "dismissed",
                  "type": "persistent"
               },
               "type": "expr"
            },
            {
               "lhs": "upgradeReminder",
               "rhs": " \n            <div id=\"kobj_upgrade_notice\" style=\"background-color: #000000; padding: 1pt; -moz-border-radius: 5px; -webkit-border-radius: 5px; border: solid 2px black;\">\n              <img src='http://frag.kobj.net/clients/azigo_citi_demo/images/azigo_logo_black_34.png'>\n               <div  style=\"padding: 3pt;\n                            -moz-border-radius: 5px;\n                            -webkit-border-radius: 5px;\n                            background-color: #FFFFFF;\n                            width: 225px;\n                            text-align: center;\n                            color: black;\">\n                  <p class=\"content\">A new version of Student Advantage card is available. To continue getting reminders for Student Advantage, please download the new card from <a target='_blank' style=\"color:#710100; text-decoration:underline;\" href='http://www.azigo.com/landing/sadv-upgrade.html'>here<\/a>.<\/p>\n                  <div class=\"dismiss\">Remind me tomorrow!<\/div>\n              <\/div>\n            <\/div>\n          ",
               "type": "here_doc"
            }
         ],
         "state": "active"
      },
      {
         "actions": [{"action": {
            "args": [
               {
                  "type": "str",
                  "val": "#kobj_upgrade_notice"
               },
               {
                  "type": "str",
                  "val": "style"
               },
               {
                  "type": "str",
                  "val": "display: none;"
               }
            ],
            "modifiers": null,
            "name": "set_element_attr",
            "source": null
         }}],
         "blocktype": null,
         "callbacks": null,
         "cond": {
            "type": "bool",
            "val": "true"
         },
         "emit": null,
         "foreach": [],
         "name": "mark_as_read_and_dismiss_content",
         "pagetype": {
            "event_expr": {
               "domain": "web",
               "element": ".dismiss",
               "op": "click",
               "type": "prim_event"
            },
            "foreach": []
         },
         "post": {
            "cons": [{
               "action": "iterator",
               "domain": "ent",
               "from": {
                  "type": "num",
                  "val": null
               },
               "name": "dismissed",
               "op": "+=",
               "type": "persistent",
               "value": {
                  "type": "num",
                  "val": null
               }
            }],
            "type": "fired"
         },
         "state": "active"
      },
      {
         "actions": [
            {"action": {
               "args": [{
                  "type": "var",
                  "val": "remindMeSelector"
               }],
               "modifiers": [
                  {
                     "name": "remote",
                     "value": {
                        "type": "str",
                        "val": "https://service.azigo.com/remindmeac-test/fetch?callback=?&jsonData=true&source=aaaw"
                     }
                  },
                  {
                     "name": "outer_div_css",
                     "value": {
                        "type": "hashraw",
                        "val": [
                           {
                              "lhs": "float",
                              "rhs": {
                                 "type": "str",
                                 "val": "none"
                              }
                           },
                           {
                              "lhs": "margin-left",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           },
                           {
                              "lhs": "padding-right",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           }
                        ]
                     }
                  },
                  {
                     "name": "inner_div_css",
                     "value": {
                        "type": "hashraw",
                        "val": [
                           {
                              "lhs": "margin-left",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           },
                           {
                              "lhs": "padding-right",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           },
                           {
                              "lhs": "padding-top",
                              "rhs": {
                                 "type": "str",
                                 "val": "5px"
                              }
                           }
                        ]
                     }
                  },
                  {
                     "name": "li_css",
                     "value": {
                        "type": "hashraw",
                        "val": [
                           {
                              "lhs": "padding-left",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           },
                           {
                              "lhs": "white-space",
                              "rhs": {
                                 "type": "str",
                                 "val": "normal"
                              }
                           }
                        ]
                     }
                  },
                  {
                     "name": "placement",
                     "value": {
                        "type": "str",
                        "val": "after"
                     }
                  },
                  {
                     "name": "domains",
                     "value": {
                        "type": "hashraw",
                        "val": [{
                           "lhs": "www.bing.com",
                           "rhs": {
                              "type": "hashraw",
                              "val": [{
                                 "lhs": "modify",
                                 "rhs": {
                                    "type": "str",
                                    "val": ".sa_cc"
                                 }
                              }]
                           }
                        }]
                     }
                  }
               ],
               "name": "annotate_search_results",
               "source": null
            }},
            {"action": {
               "args": [{
                  "type": "var",
                  "val": "remindMeSelector"
               }],
               "modifiers": [
                  {
                     "name": "remote",
                     "value": {
                        "type": "str",
                        "val": "https://service.azigo.com/remindmeac-test/fetch?callback=?&jsonData=true&source=aaaw"
                     }
                  },
                  {
                     "name": "placement",
                     "value": {
                        "type": "str",
                        "val": "after"
                     }
                  },
                  {
                     "name": "domains",
                     "value": {
                        "type": "hashraw",
                        "val": [{
                           "lhs": "www.bing.com",
                           "rhs": {
                              "type": "hashraw",
                              "val": [{
                                 "lhs": "modify",
                                 "rhs": {
                                    "type": "str",
                                    "val": ".sc_ol1"
                                 }
                              }]
                           }
                        }]
                     }
                  }
               ],
               "name": "annotate_local_search_results",
               "source": null
            }}
         ],
         "blocktype": "every",
         "callbacks": {"success": [{
            "attribute": "class",
            "trigger": null,
            "type": "click",
            "value": "flyout-reminder-button"
         }]},
         "cond": {
            "args": [
               {
                  "args": [{
                     "type": "str",
                     "val": "datasets"
                  }],
                  "predicate": "param",
                  "source": "page:"
               },
               {
                  "type": "str",
                  "val": "(^|,)aaawa(,|$)"
               }
            ],
            "op": "like",
            "type": "prim"
         },
         "emit": "\n        ",
         "foreach": [],
         "name": "aaa_newui_goolge",
         "pagetype": {
            "event_expr": {
               "lagacy": 1,
               "pattern": "^http://www.google.com|^http://www.bing.com",
               "type": "prim_event",
               "vars": []
            },
            "op": "pageview"
         },
         "pre": [],
         "state": "active"
      },
      {
         "actions": [
            {"action": {
               "args": [{
                  "type": "var",
                  "val": "remindMeSelector"
               }],
               "modifiers": [
                  {
                     "name": "remote",
                     "value": {
                        "type": "str",
                        "val": "https://service.azigo.com/remindmeac-test/fetch?callback=?&jsonData=true&source=aaaw"
                     }
                  },
                  {
                     "name": "outer_div_css",
                     "value": {
                        "type": "hashraw",
                        "val": [
                           {
                              "lhs": "float",
                              "rhs": {
                                 "type": "str",
                                 "val": "none"
                              }
                           },
                           {
                              "lhs": "height",
                              "rhs": {
                                 "type": "str",
                                 "val": "40px"
                              }
                           },
                           {
                              "lhs": "margin-left",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           },
                           {
                              "lhs": "margin-top",
                              "rhs": {
                                 "type": "str",
                                 "val": "-10px"
                              }
                           },
                           {
                              "lhs": "padding-right",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           }
                        ]
                     }
                  },
                  {
                     "name": "inner_div_css",
                     "value": {
                        "type": "hashraw",
                        "val": [
                           {
                              "lhs": "margin-left",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           },
                           {
                              "lhs": "padding-right",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           }
                        ]
                     }
                  },
                  {
                     "name": "li_css",
                     "value": {
                        "type": "hashraw",
                        "val": [
                           {
                              "lhs": "padding-left",
                              "rhs": {
                                 "type": "str",
                                 "val": "0px"
                              }
                           },
                           {
                              "lhs": "white-space",
                              "rhs": {
                                 "type": "str",
                                 "val": "normal"
                              }
                           }
                        ]
                     }
                  },
                  {
                     "name": "placement",
                     "value": {
                        "type": "str",
                        "val": "after"
                     }
                  },
                  {
                     "name": "domains",
                     "value": {
                        "type": "hashraw",
                        "val": [{
                           "lhs": "search.yahoo.com",
                           "rhs": {
                              "type": "hashraw",
                              "val": [
                                 {
                                    "lhs": "selector",
                                    "rhs": {
                                       "type": "str",
                                       "val": "#web > ol > li"
                                    }
                                 },
                                 {
                                    "lhs": "modify",
                                    "rhs": {
                                       "type": "str",
                                       "val": "div.res"
                                    }
                                 }
                              ]
                           }
                        }]
                     }
                  }
               ],
               "name": "annotate_search_results",
               "source": null
            }},
            {"action": {
               "args": [{
                  "type": "var",
                  "val": "remindMeSelector"
               }],
               "modifiers": [
                  {
                     "name": "remote",
                     "value": {
                        "type": "str",
                        "val": "https://service.azigo.com/remindmeac-test/fetch?callback=?&jsonData=true&source=aaaw"
                     }
                  },
                  {
                     "name": "placement",
                     "value": {
                        "type": "str",
                        "val": "after"
                     }
                  },
                  {
                     "name": "domains",
                     "value": {
                        "type": "hashraw",
                        "val": [{
                           "lhs": "search.yahoo.com",
                           "rhs": {
                              "type": "hashraw",
                              "val": [{
                                 "lhs": "modify",
                                 "rhs": {
                                    "type": "str",
                                    "val": ".qlmr"
                                 }
                              }]
                           }
                        }]
                     }
                  }
               ],
               "name": "annotate_local_search_results",
               "source": null
            }}
         ],
         "blocktype": "every",
         "callbacks": {"success": [{
            "attribute": "class",
            "trigger": null,
            "type": "click",
            "value": "flyout-reminder-button"
         }]},
         "cond": {
            "args": [
               {
                  "args": [{
                     "type": "str",
                     "val": "datasets"
                  }],
                  "predicate": "param",
                  "source": "page:"
               },
               {
                  "type": "str",
                  "val": "(^|,)aaawa(,|$)"
               }
            ],
            "op": "like",
            "type": "prim"
         },
         "emit": "\n        ",
         "foreach": [],
         "name": "aaa_newui_yahoo",
         "pagetype": {
            "event_expr": {
               "lagacy": 1,
               "pattern": "^http://search.yahoo.com",
               "type": "prim_event",
               "vars": []
            },
            "op": "pageview"
         },
         "pre": [],
         "state": "active"
      },
      {
         "actions": [{"emit": "\nKOBJ.spotlight('aaaw');                       "}],
         "blocktype": "every",
         "callbacks": {"success": [{
            "attribute": "class",
            "trigger": null,
            "type": "click",
            "value": "flyout-reminder-button"
         }]},
         "cond": {
            "args": [
               {
                  "args": [{
                     "type": "str",
                     "val": "datasets"
                  }],
                  "predicate": "param",
                  "source": "page:"
               },
               {
                  "type": "str",
                  "val": "(^|,)aaawa(,|$)"
               }
            ],
            "op": "like",
            "type": "prim"
         },
         "emit": null,
         "foreach": [],
         "name": "aaa_newui_spotlight",
         "pagetype": {
            "event_expr": {
               "lagacy": 1,
               "pattern": "^http://search.yahoo.com|^http://www.bing.com",
               "type": "prim_event",
               "vars": []
            },
            "op": "pageview"
         },
         "pre": [],
         "state": "active"
      },
      {
         "actions": [{"emit": "\nKOBJ.spotlight('aaaw');         KOBJ.watchDOM(\"#rso\",function() {  \t\t\t$K('#spotlight-main-flyout').remove();  \t\t\tKOBJ.spotlight('aaaw');  \t\t }  \t );                    "}],
         "blocktype": "every",
         "callbacks": {"success": [{
            "attribute": "class",
            "trigger": null,
            "type": "click",
            "value": "flyout-reminder-button"
         }]},
         "cond": {
            "args": [
               {
                  "args": [{
                     "type": "str",
                     "val": "datasets"
                  }],
                  "predicate": "param",
                  "source": "page:"
               },
               {
                  "type": "str",
                  "val": "(^|,)aaawa(,|$)"
               }
            ],
            "op": "like",
            "type": "prim"
         },
         "emit": null,
         "foreach": [],
         "name": "aaa_newui_spotlight_google",
         "pagetype": {
            "event_expr": {
               "lagacy": 1,
               "pattern": "^http://www.google.com",
               "type": "prim_event",
               "vars": []
            },
            "op": "pageview"
         },
         "pre": [],
         "state": "active"
      }
   ],
   "ruleset_name": "1024"
}
